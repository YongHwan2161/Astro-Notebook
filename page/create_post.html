<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Post</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Quill CSS -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <script src="/script/includeHTML.js"></script>
    <script defer src="/script/script.js"></script>
    <script defer src="/script/gnb.js"></script>
    <script deger src="/script/login.js"></script>
    <script defer src="/script/board.js"></script>
    <script defer src="/script/search.js"></script>
    <!-- Quill JS -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    
    <style>
        /* Quill 에디터 스타일 */
        #editor {
            border: none;
        }
        /* 툴바 스타일 */
        .ql-toolbar.ql-snow {
            border: none;
        }
    </style>
</head>

<body>
    <div data-include-path="/asset/html/gnb.html"></div>

    <figure>
        <div class="container">
            <h1>새 글 작성</h1>
            <div class="input-box">
                <!--<div class="input-box-text">제목</div>-->
                <input type="text" placeholder="제목" class="input-box-input"></input>
            </div>
            <div class="input-box">
                <!--<div class="input-box-text">카테고리</div>-->
                <input type="text" placeholder="카테고리" class="input-box-input"></input>
            </div>
            <div class="input-box-large">
                <!--<div class="input-box-text">요약</div>-->
                <textarea name="abstract" rows="3" placeholder="내용을 간단하게 설명해주세요" class="input-box-input"></textarea>
            </div>
            <div class="input-box-large">
                <div class="input-box-input">
                    <!--<div class="input-box-text">본문</div>-->
                    <!-- Quill editor container -->
                    <div id="editor"></div>
                </div>
            </div>
            <div class="input-box">
                <!--<div class="input-box-text">태그</div>-->
                <input type="text" placeholder="태그:해시태그(#)로 구분해주세요" class="input-box-input"></input>
            </div>
        </div>
        <div class="btn-group" id="group-align-std", style="margin-bottom: 10px;">
            <div class="btn-rtg" id="btn-dny">취소하기</div>
            <div class="btn-group">
                <div class="btn-rtg">임시저장</div>
                <div class="btn-rtg" id="btn-agr">등록하기</div>
            </div>
        </div>
    </figure>

    <script>

        includeHTML();

        // Initialize Quill editor
        // Define custom icon
        let icons = Quill.import('ui/icons');
        icons['upload-3d'] = '<strong>3D</strong>';

        var quill = new Quill('#editor', {
            modules: {
                toolbar: {
                    container: [
                        [{ 'font': [] }, { 'size': [] }],
                        [{ 'header': '1' }, { 'header': '2' }],
                        ['bold', 'italic', 'underline', 'strike'],
                        [{ 'script': 'sub' }, { 'script': 'super' }],
                        [{ 'color': [] }, { 'background': [] }],
                        [{ 'align': [] }, /*{ 'direction': 'rtl' }],
                        [*/{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],
                        ['blockquote', 'code-block'],
                        ['link', 'image', 'video', 'formula', 'upload-3d'], // Custom button for 3D model upload
                        ['clean']

                    ],
                    handlers: {
                        'upload-3d': function () {
                            select3DFile();
                        }
                    }
                },
            },
            theme: 'snow'
        });

        // You may want to add event listeners to your buttons here
        document.getElementById('btn-agr').addEventListener('click', function () {
            // Get the contents of the editor
            var content = quill.root.innerHTML;
            // Here you would typically send this content to your server
            console.log(content);
        });

        // 3D 모델 삽입 관련 함수들
        function select3DFile() {
            let input = document.createElement('input');
            input.type = 'file';
            input.multiple = true;
            input.accept = '.obj,.mtl,.stl,.3ds,.png,.jpg,.jpeg';
            input.onchange = function (event) {
                var files = event.target.files;
                if (files.length > 0) {
                    load3DModel(files);
                }
            };
            input.click();
        }
    </script>
</body>

</html>